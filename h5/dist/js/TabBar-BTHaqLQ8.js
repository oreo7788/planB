import{u as w,_ as N}from"./_plugin-vue_export-helper-BGiHQUbd.js";import{d as g,m as z,n as p,O as C,c as k,r as W,P as j,f as i,ar as E,as as F,ai as M,i as y,C as q,at as D,J,k as A,au as K,aq as L,T as Y,I as S,a4 as Z,j as G,l as I,q as P,s as H,v as B,F as Q,z as U,y as X,t as ee}from"./index-BzANx2fI.js";import{u as ae,r as te}from"./use-route-8cfyQcNc.js";const[O,T]=k("tabbar"),ne={route:Boolean,fixed:C,border:C,zIndex:p,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:z(0),safeAreaInsetBottom:{type:Boolean,default:null}},V=Symbol(O);var oe=g({name:O,props:ne,emits:["change","update:modelValue"],setup(a,{emit:d,slots:r}){const l=W(),{linkChildren:u}=j(V),c=w(l,T),m=()=>{var t;return(t=a.safeAreaInsetBottom)!=null?t:a.fixed},e=()=>{var t;const{fixed:n,zIndex:s,border:o}=a;return i("div",{ref:l,role:"tablist",style:E(s),class:[T({fixed:n}),{[F]:o,"van-safe-area-bottom":m()}]},[(t=r.default)==null?void 0:t.call(r)])};return u({props:a,setActive:(t,n)=>{M(a.beforeChange,{args:[t],done(){d("update:modelValue",t),d("change",t),n()}})}}),()=>a.fixed&&a.placeholder?c(e):e()}});const re=y(oe),[se,_]=k("tabbar-item"),ce=q({},te,{dot:Boolean,icon:String,name:p,badge:p,badgeProps:Object,iconPrefix:String});var ie=g({name:se,props:ce,emits:["click"],setup(a,{emit:d,slots:r}){const l=ae(),u=D().proxy,{parent:c,index:m}=J(V);if(!c)return;const e=A(()=>{var n;const{route:s,modelValue:o}=c.props;if(s&&"$route"in u){const{$route:h}=u,{to:v}=a,f=K(v)?v:{path:v};return h.matched.some(x=>{const R="path"in f&&f.path===x.path,$="name"in f&&f.name===x.name;return R||$})}return((n=a.name)!=null?n:m.value)===o}),b=n=>{var s;e.value||c.setActive((s=a.name)!=null?s:m.value,l),d("click",n)},t=()=>{if(r.icon)return r.icon({active:e.value});if(a.icon)return i(S,{name:a.icon,classPrefix:a.iconPrefix},null)};return()=>{var n;const{dot:s,badge:o}=a,{activeColor:h,inactiveColor:v}=c.props,f=e.value?h:v;return i("div",{role:"tab",class:_({active:e.value}),style:{color:f},tabindex:0,"aria-selected":e.value,onClick:b},[i(L,Y({dot:s,class:_("icon"),content:o},a.badgeProps),{default:t}),i("div",{class:_("text")},[(n=r.default)==null?void 0:n.call(r,{active:e.value})])])}}});const le=y(ie),ue={class:"tabbar-wrapper"},de=g({__name:"TabBar",setup(a){const d=Z(),r=G(),l=A(()=>{const e=d.path;return e==="/"||e.startsWith("/detail")?"home":e==="/mine"||e.startsWith("/tags")||e.startsWith("/trash")||e.startsWith("/about")?"mine":"home"}),u=[{name:"home",icon:"wap-home-o",activeIcon:"wap-home",label:"首页",path:"/"},{name:"mine",icon:"user-o",activeIcon:"user",label:"我的",path:"/mine"}],c=e=>{const b=u.find(t=>t.name===e);b&&r.push(b.path)},m=()=>{r.push("/add")};return(e,b)=>{const t=le,n=re,s=S;return P(),I("div",ue,[i(n,{"model-value":l.value,onChange:c,"safe-area-inset-bottom":""},{default:B(()=>[(P(),I(Q,null,U(u,o=>i(t,{key:o.name,name:o.name,icon:l.value===o.name?o.activeIcon:o.icon},{default:B(()=>[X(ee(o.label),1)]),_:2},1032,["name","icon"])),64))]),_:1},8,["model-value"]),H("button",{class:"fab-button",onClick:m},[i(s,{name:"plus",size:"28",color:"#fff"})])])}}}),ve=N(de,[["__scopeId","data-v-cfa076b1"]]);export{ve as T};
